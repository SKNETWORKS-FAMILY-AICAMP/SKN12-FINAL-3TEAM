# ğŸ“Š TtalKkak AI Pipeline ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ”¬ ì²˜ë¦¬ ë‹¨ê³„ ìƒì„¸ ì„¤ëª…

### **ì „ì²´ íŒŒì´í”„ë¼ì¸ í”Œë¡œìš°**
```
ìŒì„± íŒŒì¼ (test.MP3)
    â†“
[Step 1] WhisperX ì „ì‚¬
    â†“
[Step 2] BERT ì „ì²˜ë¦¬ (Triplet ì¶”ì¶œ)
    â†“
[Step 3] BERT ë¶„ë¥˜ (ë…¸ì´ì¦ˆ í•„í„°ë§)
    â†“
[Step 4] LLM ì…ë ¥ í›„ì²˜ë¦¬ â† ğŸ†• ì¶”ê°€ëœ ì¤‘ìš” ë‹¨ê³„!
    â†“
[Step 5] íšŒì˜ë¡ ìƒì„± (ë…¸ì…˜ í˜•ì‹)
    â†“
[Step 6] Task & SubTask ìƒì„±
```

---

## ğŸ“ ê° ë‹¨ê³„ë³„ ì €ì¥ íŒŒì¼ ì„¤ëª…

### **Step 1: WhisperX ì „ì‚¬ (`step1_whisperx_transcription`)**
```json
{
  "success": true,
  "full_text": "ì „ì²´ ì „ì‚¬ëœ í…ìŠ¤íŠ¸",
  "segments": [
    {
      "text": "ë¬¸ì¥ ë‹¨ìœ„ í…ìŠ¤íŠ¸",
      "start": 0.0,
      "end": 2.5
    }
  ],
  "duration": 120.5,
  "language": "ko"
}
```
- **ì›ë³¸ ìŒì„±ì˜ ì „ì²´ ì „ì‚¬ ê²°ê³¼**
- íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ ì„¸ê·¸ë¨¼íŠ¸
- ë…¸ì´ì¦ˆ, ì¹¨ë¬µ, ì¤‘ë³µ ë°œí™” ëª¨ë‘ í¬í•¨

---

### **Step 2: BERT ì „ì²˜ë¦¬ (`step2_bert_preprocessing`)**
```json
{
  "original_text": "ì „ì‚¬ëœ ì›ë³¸ í…ìŠ¤íŠ¸",
  "triplet_data": {
    "triplets": [
      {
        "subject": "ê°œë°œíŒ€",
        "predicate": "êµ¬í˜„",
        "object": "API"
      }
    ]
  },
  "segments": ["ë¬¸ì¥1", "ë¬¸ì¥2", "..."],
  "processing_stats": {
    "total_segments": 150,
    "triplet_count": 45
  }
}
```
- **Triplet ì¶”ì¶œ ê²°ê³¼** (ì£¼ì²´-í–‰ë™-ëŒ€ìƒ)
- ë¬¸ì¥ ë‹¨ìœ„ë¡œ ë¶„í• ëœ ì„¸ê·¸ë¨¼íŠ¸
- BERT ë¶„ë¥˜ ì „ ë°ì´í„° ì¤€ë¹„

---

### **Step 3: BERT ë¶„ë¥˜ (`step3_bert_classification`)**
```json
{
  "filtered_transcript": "ìœ íš¨í•œ ë°œí™”ë§Œ í¬í•¨ëœ í…ìŠ¤íŠ¸",
  "valid_segments": ["ìœ íš¨ ë¬¸ì¥1", "ìœ íš¨ ë¬¸ì¥2"],
  "noise_segments": ["ìŒ...", "ê·¸ë˜ì„œ...", "ì•„ ê·¸ê±°"],
  "filtering_ratio": 0.35,
  "statistics": {
    "original_count": 150,
    "valid_count": 98,
    "noise_count": 52
  }
}
```
- **ë…¸ì´ì¦ˆ í•„í„°ë§ ì™„ë£Œëœ ê¹¨ë—í•œ í…ìŠ¤íŠ¸**
- ìœ íš¨/ë…¸ì´ì¦ˆ ë¶„ë¥˜ ê²°ê³¼
- 35% ì •ë„ì˜ ë…¸ì´ì¦ˆ ì œê±° íš¨ê³¼

---

### **Step 4: LLM í›„ì²˜ë¦¬ (`step4_llm_postprocessing`)** ğŸ†•
```json
{
  "original_filtered_text": "BERT í•„í„°ë§ëœ í…ìŠ¤íŠ¸",
  "refined_text": "LLMì— ìµœì í™”ëœ ì •ì œëœ í…ìŠ¤íŠ¸",
  "structured_input": {
    "context": "íšŒì˜ ë…¹ì·¨ë¡ ë¶„ì„",
    "content": "ì •ì œëœ ë³¸ë¬¸",
    "paragraphs": ["ë‹¨ë½1", "ë‹¨ë½2", "..."],
    "chunks": ["ì²­í¬1", "ì²­í¬2"]  // ê¸´ í…ìŠ¤íŠ¸ì˜ ê²½ìš°
  },
  "postprocessing_stats": {
    "original_length": 15000,
    "refined_length": 12000,
    "sentence_count": 120,
    "paragraph_count": 15,
    "chunk_count": 1,
    "estimated_tokens": 18000,
    "chunking_required": false
  },
  "optimization": {
    "duplicate_removal": true,     // ì¤‘ë³µ ì œê±°
    "sentence_cleaning": true,      // ë¬¸ì¥ ì •ë¦¬
    "paragraph_structuring": true,  // ë‹¨ë½ êµ¬ì„±
    "token_optimization": true      // í† í° ìµœì í™”
  }
}
```

#### **í›„ì²˜ë¦¬ ìƒì„¸ ì‘ì—…:**
1. **í…ìŠ¤íŠ¸ ì •ì œ**
   - ì—°ì†ëœ ê³µë°± ì œê±°
   - ë¶ˆì™„ì „í•œ ë¬¸ì¥ ì œê±° (5ì ë¯¸ë§Œ)
   - ë¬¸ì¥ ë¶€í˜¸ ì •ë¦¬

2. **êµ¬ì¡°í™”**
   - ì˜ë¯¸ ë‹¨ìœ„ë¡œ ë‹¨ë½ êµ¬ì„±
   - ì£¼ì œë³„ ê·¸ë£¹í•‘
   - ë…¼ë¦¬ì  íë¦„ ì •ë¦¬

3. **í† í° ìµœì í™”**
   - ë¶ˆí•„ìš”í•œ ë°˜ë³µ ì œê±°
   - ë™ì˜ì–´ í†µí•©
   - í† í° ìˆ˜ ì¶”ì • ë° ê´€ë¦¬

4. **ì²­í‚¹ ì²˜ë¦¬**
   - 28,000 í† í° ì´ˆê³¼ ì‹œ ìë™ ë¶„í• 
   - ë¬¸ë§¥ ìœ ì§€ë¥¼ ìœ„í•œ ì˜¤ë²„ë©
   - ê° ì²­í¬ë³„ ë…ë¦½ ì²˜ë¦¬ ê°€ëŠ¥

---

### **Step 5: íšŒì˜ë¡ ìƒì„± (`step5_meeting_minutes`)**
```json
{
  "success": true,
  "notion_project": {
    "projectName": "í”„ë¡œì íŠ¸ëª…",
    "summary": "íšŒì˜ ìš”ì•½",
    "keyPoints": ["í•µì‹¬1", "í•µì‹¬2"],
    "decisions": ["ê²°ì •ì‚¬í•­1", "ê²°ì •ì‚¬í•­2"],
    "actionItems": ["ì‹¤í–‰í•­ëª©1", "ì‹¤í–‰í•­ëª©2"]
  },
  "formatted_notion": "ë…¸ì…˜ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ í…ìŠ¤íŠ¸"
}
```
- **êµ¬ì¡°í™”ëœ íšŒì˜ë¡**
- ë…¸ì…˜ í˜ì´ì§€ í˜•ì‹
- í•µì‹¬ ì‚¬í•­ ì¶”ì¶œ

---

### **Step 6: Task ìƒì„± (`step6_tasks_and_subtasks`)**
```json
{
  "success": true,
  "tasks": [
    {
      "id": 1,
      "title": "API ê°œë°œ",
      "description": "REST API êµ¬í˜„",
      "priority": "high",
      "complexity_score": 8,
      "subtasks": [
        {
          "id": 1,
          "title": "ìŠ¤í‚¤ë§ˆ ì„¤ê³„",
          "estimated_hours": 4
        }
      ]
    }
  ],
  "task_count": 5,
  "subtask_count": 15,
  "complexity_analysis": {
    "average_complexity": 6.5,
    "total_estimated_hours": 120
  }
}
```
- **Task Master ìŠ¤íƒ€ì¼ ì—…ë¬´ ë¶„í•´**
- ë³µì¡ë„ ê¸°ë°˜ ì„œë¸ŒíƒœìŠ¤í¬
- ì‹œê°„ ì¶”ì • í¬í•¨

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### **ë°©ë²• 1: ë¡œì»¬ í…ŒìŠ¤íŠ¸ (ì„œë²„ ì—†ì´)**
```bash
cd ai-engine-dev
python test_local_pipeline.py
```
- ì„œë²„ ì—†ì´ ì§ì ‘ ëª¨ë“ˆ ë¡œë“œ
- ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- GPU ì—†ì–´ë„ ë¶€ë¶„ ì‹¤í–‰

### **ë°©ë²• 2: ì„œë²„ API í…ŒìŠ¤íŠ¸**
```bash
# Terminal 1: AI ì„œë²„ ì‹¤í–‰
python ai_server_final_with_triplets.py

# Terminal 2: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python test_pipeline_with_logging.py
```
- ì™„ì „í•œ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸
- ì‹¤ì œ ì„œë¹„ìŠ¤ì™€ ë™ì¼í•œ í™˜ê²½

### **ë°©ë²• 3: ë°°ì¹˜ íŒŒì¼**
```bash
run_test_pipeline.bat
```
- ìë™ í™˜ê²½ ì²´í¬
- ê²°ê³¼ í´ë” ìë™ ì—´ê¸°

---

## ğŸ“Š ê²°ê³¼ í™•ì¸

### **ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**
```
pipeline_results/
â””â”€â”€ session_20241207_150000/
    â”œâ”€â”€ step1_whisperx_transcription.json
    â”œâ”€â”€ step1_whisperx_transcription.txt
    â”œâ”€â”€ step2_bert_preprocessing.json
    â”œâ”€â”€ step3_bert_classification.json
    â”œâ”€â”€ step3_bert_classification.txt
    â”œâ”€â”€ step4_llm_postprocessing.json    # ğŸ†• í›„ì²˜ë¦¬ ê²°ê³¼
    â”œâ”€â”€ step4_llm_postprocessing.txt     # ğŸ†• ì •ì œëœ í…ìŠ¤íŠ¸
    â”œâ”€â”€ step5_meeting_minutes.json
    â”œâ”€â”€ step6_tasks_and_subtasks.json
    â””â”€â”€ pipeline_summary.json
```

### **ì£¼ìš” í™•ì¸ í¬ì¸íŠ¸**

1. **ë…¸ì´ì¦ˆ ì œê±° íš¨ê³¼**
   - Step 1 â†’ Step 3: ì–¼ë§ˆë‚˜ ì¤„ì—ˆëŠ”ì§€
   - `filtering_ratio` í™•ì¸

2. **í…ìŠ¤íŠ¸ ì •ì œ íš¨ê³¼**
   - Step 3 â†’ Step 4: êµ¬ì¡°í™” ê°œì„ 
   - ë¬¸ì¥/ë‹¨ë½ êµ¬ì„± í™•ì¸

3. **í† í° ìµœì í™”**
   - `estimated_tokens` í™•ì¸
   - ì²­í‚¹ í•„ìš” ì—¬ë¶€

4. **ìµœì¢… í’ˆì§ˆ**
   - Step 5: íšŒì˜ë¡ í’ˆì§ˆ
   - Step 6: ì—…ë¬´ ë¶„í•´ ì ì ˆì„±

---

## ğŸ” ë””ë²„ê¹… íŒ

### **ê° ë‹¨ê³„ë³„ ë¬¸ì œ í•´ê²°**

| ë‹¨ê³„ | ì¼ë°˜ì ì¸ ë¬¸ì œ | í•´ê²° ë°©ë²• |
|------|-------------|-----------|
| Step 1 | WhisperX ë©”ëª¨ë¦¬ ë¶€ì¡± | batch_size ì¤„ì´ê¸° (16â†’8) |
| Step 2-3 | BERT ëª¨ë“ˆ ì—†ìŒ | `test_local_pipeline.py` ì‚¬ìš© |
| Step 4 | í† í° ì´ˆê³¼ | ìë™ ì²­í‚¹ í™•ì¸ |
| Step 5-6 | LLM ì‘ë‹µ ì—†ìŒ | ì„œë²„ ìƒíƒœ í™•ì¸ |

### **ë¡œê·¸ ë ˆë²¨ ì¡°ì •**
```python
# ë” ìƒì„¸í•œ ë¡œê·¸ë¥¼ ì›í•  ë•Œ
logging.basicConfig(level=logging.DEBUG)
```

---

## ğŸ“ˆ ì„±ëŠ¥ ì§€í‘œ

### **ì¼ë°˜ì ì¸ ì²˜ë¦¬ ì‹œê°„**
- Step 1 (WhisperX): ì‹¤ì‹œê°„ì˜ 0.5ë°°
- Step 2-3 (BERT): 1-2ì´ˆ
- Step 4 (í›„ì²˜ë¦¬): < 1ì´ˆ
- Step 5-6 (LLM): 10-30ì´ˆ

### **í…ìŠ¤íŠ¸ ê°ì†Œ íš¨ê³¼**
- ì›ë³¸ â†’ BERT í•„í„°ë§: 30-40% ê°ì†Œ
- BERT â†’ LLM í›„ì²˜ë¦¬: 10-20% ì¶”ê°€ ê°ì†Œ
- ì „ì²´: 40-50% ê°ì†Œ (ë…¸ì´ì¦ˆ ì œê±° + ìµœì í™”)

---

## ğŸ’¡ í™œìš© ì˜ˆì‹œ

### **í’ˆì§ˆ ê°œì„  í™•ì¸**
1. `step1_*.txt` vs `step4_*.txt` ë¹„êµ
2. ë…¸ì´ì¦ˆê°€ ì œê±°ë˜ê³  êµ¬ì¡°í™”ëœ ê²ƒ í™•ì¸
3. LLM ì…ë ¥ìœ¼ë¡œ ìµœì í™”ëœ ê²ƒ í™•ì¸

### **íŒŒë¼ë¯¸í„° íŠœë‹**
- ë…¸ì´ì¦ˆ í•„í„°ë§ ê°•ë„ ì¡°ì ˆ
- ë‹¨ë½ í¬ê¸° ì¡°ì •
- ì²­í‚¹ ì„ê³„ê°’ ë³€ê²½

### **ì»¤ìŠ¤í…€ ì²˜ë¦¬ ì¶”ê°€**
- ë„ë©”ì¸ íŠ¹í™” ìš©ì–´ ì²˜ë¦¬
- í™”ì ë¶„ë¦¬
- ê°ì • ë¶„ì„

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ìŒ íŒŒì¼ë“¤ì„ í™•ì¸í•˜ì„¸ìš”:
- `pipeline_summary.json`: ì „ì²´ ì‹¤í–‰ ìš”ì•½
- `step*_*.json`: ê° ë‹¨ê³„ë³„ ìƒì„¸ ê²°ê³¼
- ë¡œê·¸ íŒŒì¼: ì‹¤í–‰ ì¤‘ ì¶œë ¥ëœ ë©”ì‹œì§€

í…ŒìŠ¤íŠ¸ íŒŒì¼ ì¤€ë¹„:
- íŒŒì¼ëª…: `test.MP3`
- ìœ„ì¹˜: `ai-engine-dev/` í´ë”
- ê¶Œì¥: 1-5ë¶„ ê¸¸ì´ì˜ íšŒì˜ ë…¹ìŒ